<!DOCTYPE HTML>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JSON</title>
  <link rel="icon" href="https://xitog.github.io/dgx/img/favicon.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="https://xitog.github.io/dgx/img/favicon.ico" type="image/x-icon" />
  <link href="https://xitog.github.io/dgx/css/simplex.bootstrap.css" rel="stylesheet">
  <link href="https://xitog.github.io/dgx/css/palatino.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
</head>
<body>
<div id="main" class="container">
      <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
             <a class="navbar-brand" href="#">Menu</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li id="Accueil"><a href="https://xitog.github.io/dgx/index.html">Accueil</a></li>
              <li id="Blog"><a href="https://xitog.github.io/dgx/blog.html">Blog</a></li>
              <li class="dropdown">
                <a id="Langues" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Langues <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                <li class="dropdown-header">Français</li>
                  <li><a href="https://xitog.github.io/dgx/francais/fiche_api_fr.html">Fiche sur les phonèmes du français</a></li>
                  <li><a href="https://xitog.github.io/dgx/francais/outil_stats_fr.html">Outil d'analyse textuelle</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Italien</li>
                  <li><a href="https://xitog.github.io/dgx/italien/beatrice.html">Beatrice : grammaire</a></li>
                  <li><a href="https://xitog.github.io/dgx/italien/jeu_conjugaison.html">Jeu sur la conjugaison</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Anglais</li>
                  <li><a href="https://xitog.github.io/dgx/anglais/jeu_vocabulaire.html">Jeu sur le vocabulaire</a></li>
                  <li><a href="https://xitog.github.io/dgx/anglais/verbes.html">Verbes fréquents</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Interlingua</li>
                  <li><a href="https://xitog.github.io/dgx/interlingua/conjugueur.html">Conjugueur</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Linguistique</li>
                  <li><a href="https://xitog.github.io/dgx/linguistique/informations.html">Informations générales</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a id="Informatique" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Informatique <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li class="dropdown-header">Projets</li>
                  <li><a href="https://xitog.github.io/dgx/ash/index.html">Ash</a></li>
                  <li><a href="https://xitog.github.io/dgx/hamill/index.html">Hamill</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Programmation</li>
                  <li><a href="https://xitog.github.io/dgx/informatique/syntaxes.html">Syntaxes comparées</a></li>
                  <li><a href="https://xitog.github.io/dgx/informatique/python.html">Aide-mémoire Python</a></li>
                  <li><a href="https://xitog.github.io/dgx/informatique/ruby.html">Aide-mémoire Ruby</a></li>
                  <li><a href="https://xitog.github.io/dgx/informatique/lua.html">Aide-mémoire Lua</a></li>
                  <li><a href="https://xitog.github.io/dgx/informatique/ruby_guide.html">Guide Ruby</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Modélisation</li>
                  <li><a href="https://xitog.github.io/dgx/informatique/bnf.html">Aide-mémoire BNF et EBNF</a></li>
                  <li><a href="https://xitog.github.io/dgx/informatique/json.html">Aide-mémoire JSON</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Autres</li>
                  <li><a href="https://xitog.github.io/dgx/informatique/version_control.html">Gestion de versions</a></li>
                  <li><a href="https://xitog.github.io/dgx/informatique/tools_langs.html">Logiciels utiles et autres langages</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a id="Histoire" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Histoire <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li class="dropdown-header">Méthode</li>
                  <li><a href="https://xitog.github.io/dgx/histoire/methode.html">Généralités</a></li>
                  <li><a href="https://xitog.github.io/dgx/histoire/bibliographie.html">Bibliographie</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Aide-mémoires</li>
                  <li><a href="https://xitog.github.io/dgx/histoire/france19eme.html">France au XIX<sup>e</sup></a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a id="Jeux" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Passe-temps <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li class="dropdown-header">Projets</li>
                  <li><a href="https://xitog.github.io/dgx/teddy/index.html">Éditeur de carte</a></li>
                  <li><a href="https://xitog.github.io/dgx/rts/index.html">Jouer à mon RTS</a></li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/project_fps.html">Jouer à mon FPS</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Présentations générales</li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/pres_jeux.html">Les jeux</a></li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/pres_jeuxvideo.html">Les jeux vidéo</a></li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/pres_favoris.html">Favoris artistiques</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Jeux de rôles</li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/systemes_rpg.html">Systèmes des RPG</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Livres-jeux</li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/compagnon_talisman.html">Le Compagnon du Talisman</a></li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/compagnon_sorcier.html">Le Compagnon du Sorcier</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Histoire des jeux vidéo</li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/history_rts.html">Les enfants de Dune : les RTS</a></li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/history_fps.html">Les enfants de Doom : les FPS</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Techniques des jeux vidéo</li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/tech_raycasting_fr.html">Le raycasting : la 2.5D</a></li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/tech_transitions.html">Cartes et transitions</a></li>
                  <li><a href="https://xitog.github.io/dgx/passetemps/tech_dialogues.html">Dialogues</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a id="Autres" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Autres <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li class="dropdown-header">Applications</li>
                  <li><a href="https://xitog.github.io/dgx/concerts_classiques/index.html">Concerts classiques</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Collections</li>
                  <li><a href="https://xitog.github.io/dgx/data/outil_collections.html#prenoms">Prénoms</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Liens</li>
                  <li><a href="https://xitog.github.io/dgx/plan.html">Plan du site</a></li>
                  <li><a href="https://xitog.github.io/dgx/liens.html">Liste de liens</a></li>
                </ul>
              </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
      </nav>

<div id="content-div">
<h1 id="langage">Langage</h1>
<hr>
<p>Quelques notes sur l'analyse lexicale, l'analyse syntaxique et les langages de programmation.</p>
<p>Création : le 19 avril 2024 | Dernière mise-à-jour : le 19 avril 2024</p>
<p>Auteur : Damien Gouteux | Type : Fiche | Sujet : langage, programmation, informatique</p>
<h2 id="sommaire">Sommaire</h2>
<ul>
  <li><a href="#analyse-lexicale">Analyse lexicale</a></li>
  <li><a href="#analyse-syntaxique">Analyse syntaxique</a></li>
</ul>
<h2 id="analyse-lexicale">Analyse lexicale</h2>
<p>Toute analyse d’un langage commence par l’identification de ses unités minimales à partir d’un flux de caratères. Pour un langage naturel, comme le français, cela équivaut à identifier les mots à partir d’un flux de lettres. Un langage de programmation utilise, en plus des lettres, des chiffres, des opérateurs mathématiques comme “+” ou “-”, ou encore des séparateurs comme “,” ou “(“. Ces caractèrent forment des identifiants comme <code>compteur</code>, des nombres comme <code>567</code> ou des opérateurs comme <code>==</code>. Nous savons très bien distinguer un identifiant comme “compteur”, de l’opérateur “+” ou du chiffre du “5”, même sans espaces, dans la commande <code>compteur + 5</code> ou <code>compteur+5</code>.</p>
<p>Pour donner cette capacité à l’ordinateur, il faut écrire un analyseur lexical ou lexeur (lexer ou tokenizer en anglais). Un lexeur va transformer un flux de caractères en une liste d'unités minimales ou jetons (appelé token en anglais). Chaque jeton possède une valeur, qui est la suite de caractères qui le composent, et un type. Les différents types sont définis par le langage. La plupart des langages de programmation définissent par exemple les types suivants :</p>
<ul>
  <li>le type entier, dont les valeurs sont uniquement constituées de chiffres : <code>15</code>,</li>
  <li>le type chaîne de caractères, dont les valeurs sont encadrées par des guillemets doubles et peuvent contenir à l'intérieur de ceux-ci n'importe quel caractère : <code>"23abc 56"</code>,</li>
  <li>le type identifiant, dont les valeurs commencent toujours par une lettre et qui peuvent ensuite comporter des chiffres ou des lettres : <code>abc25</code>,</li>
  <li>le type opérateur, qui peuvent avoir plusieurs valeurs comme <code>=</code>, <code><</code>, <code>+</code>,</li>
  <li>le type booléen, représenté par <code>false</code> et <code>true</code>,</li>
  <li>un type un peu particulier, le type vide, qui est représenté par <code>null</code> ou <code>nil</code>.</li>
</ul>
<p>Le lexer s'appuie sur la définition des différents types et leurs valeurs possibles pour effectuer le découpage du flux de caractères en une liste de jetons ayant chacun une valeur et un type. Ainsi la suite : <code>5 abc25 "23 abc 56" true</code> sera transformée en la suite de jetons (valeur, type) :</p>
<ul>
  <li>(5, entier)</li>
  <li>(abc25, identifiant)</li>
  <li>("23abc 56", chaîne de caractères)</li>
  <li>(true, booléen)</li>
</ul>
<h2 id="analyse-syntaxique">Analyse syntaxique</h2>
<h3 id="la-gestion-de-la-priorité-des-opérateurs">La gestion de la priorité des opérateurs</h3>
<p>Un défi bien connu d’écrire un parseur est la priorité des opérateurs. En effet, <code>2 + 3 * 4</code> doit avoir pour résultat 14 et non 20, on exécute d’abord la multiplication (3*4), puis l’addition. Or, si notre parseur lit de gauche à droite les jetons, il lire d’abord l’addition puis la multiplication.</p>
<p>Une première solution historique était de s’affranchir de la notation mathématique la plus courante en en adoptant une avec un opérateur préfixé <code>(+ 2 * 3 4)</code> qu’on appelle la notation polonaise. Lisp utilise cette forme. Une autre solution est d’utiliser obligatoirement des parenthèses : <code>2 + (3 * 4)</code> pour peu que le parseur soit capable de s’en débrouiller. Une troisième et dernière solution est d’utiliser la notation polonaise inversée, donc avec les opérateurs postfixés mais qui oblige également à écrire les opérations dans l’ordre correspondant à la priorité mathématique : <code>3 4 * 2 +</code>. Forth est un langage qui utilise cette dernière notation.<br>
Aucune de ces solutions ne nous semble très convaincantes et les créateurs de langages ont essayé de permettre aux programmeurs de s’exprimer naturellement. Certains générateurs de parseurs proposent de constituer un tableau de priorité : la multiplication sera indiquée avec une priorité plus forte que l’addition. Mais on peut simplement s’en sortir en écrivant les règles de grammaire d’une certaine façon. Au lieu d’écrire cette grammaire au format EBNF qui n’indique pas la priorité :</p>
<pre>

 EXPRESSION = EXPRESSION ["+" | "*"] EXPRESSION
            | NOMBRE

</pre>
<p>On récrit la précédente règle sous la forme de quatre règles avec comme règle de départ R1 :</p>
<pre>

 R1. EXPRESSION = ADDITION
 R2. ADDITION = TERME { "+" TERME }
 R3. TERME = FACTEUR { "*" FACTEUR }
 R4. FACTEUR = NOMBRE

</pre>
<p>Légende : { } indique 0 ou plus, "x" indique un terminal, X = indique une définition de règle, | indique une alternative.</p>
<p>En écrivant ainsi notre grammaire, on indique la priorité de la multiplication sur l’addition. Ainsi notre suite de jetons initiales sera interprétée ainsi :</p>
<ol>
  <li>On essaye de catégoriser le premier jeton, 2 : on déploie R1, R2, R3 puis R4 qui est validée c’est un NOMBRE (R1, R2, R3, R4)</li>
  <li>On remonte à R3, on essaye de voir s’il est suivi de "*", non, mais comme c’est optionnel R3 est validée quand même (R1, R2, R3)</li>
  <li>On remonte à R2, on essaye de voir s’il est suivi d’une "+", oui, alors on va essayer de valider le second TERME de R2</li>
  <li>On déploie R3, puis R4 est validée en effet, 3 est un NOMBRE (R1, R2, R32, R42)</li>
  <li>Et c’est là que la magie opère : en remontant à R3, on remarque que 3 est bien suivi de "*" donc on va chercher à valider son FACTEUR.</li>
  <li>On déploie R43 qui est validée, 4 est un NOMBRE (R1, R2, R32, R43)</li>
  <li>On remonte à R32 qui est validée entièrement</li>
  <li>On remonte à R2 (étape 3) avec 3 * 4 comme second TERME</li>
  <li>On remonte à R1 et on obtient notre arbre correct :</li>
</ol>
<p>Arbre syntaxique :</p>
<ul>
  <li>EXPRESSION
    <ul>
      <li>ADDITION "+"
        <ul>
          <li>TERME
            <ul>
              <li>FACTEUR
                <ul>
                  <li>NOMBRE 2</li>
                </ul>
  </li>
            </ul>
  </li>
          <li>TERME "*"
            <ul>
              <li>FACTEUR
                <ul>
                  <li>NOMBRE 3</li>
                </ul>
  </li>
              <li>FACTEUR
                <ul>
                  <li>NOMBRE 4</li>
                </ul>
  </li>
            </ul>
  </li>
        </ul>
  </li>
    </ul>
  </li>
</ul>
<p>La traduction de notre grammaire à 4 règles en un parseur récursif descendant se fait naturellement avec des fonctions récursives (une pour chaque règle) et permet de construire des arbres respectant la priorité des opérateurs. Il suffit de bien penser sa grammaire au préalable.</p>
<p>Sources :</p>
<ul>
  <li><a href="https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form">https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form</a></li>
  <li><a href="https://wiki.c2.com/?PolishNotation">https://wiki.c2.com/?PolishNotation</a></li>
  <li><a href="https://wiki.c2.com/?PostfixNotation">https://wiki.c2.com/?PostfixNotation</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Recursive_descent_parser">https://en.wikipedia.org/wiki/Recursive_descent_parser</a></li>
  <li><a href="https://web.archive.org/web/20210217021532/http://web.eecs.utk.edu/~azh/blog/teenytinycompiler1.html">https://web.archive.org/web/20210217021532/http://web.eecs.utk.edu/~azh/blog/teenytinycompiler1.html</a></li>
  <li><a href="https://craftinginterpreters.com/">Crafting Interpreters</a> : un livre très bien fait qui explique tout</li>
  <li><a href="https://ruslanspivak.com/lsbasi-part1/">Let's build an interpreter</a> : un très bon tutoriel</li>
  <li><a href="https://tomassetti.me/how-to-write-a-transpiler/">How to write a transpiler</a> : un focus sur la transpilation</li>
  <li><a href="https://github.com/gfwilliams/tiny-js">Tiny JS</a> : un exemple de compilateur javascript en C</li>
</ul>

  </body>
</html>