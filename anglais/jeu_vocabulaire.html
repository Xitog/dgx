<html>
<head>
  <title>Test anglais</title>
  <script>
  
    function shuffle(array) {
      var currentIndex = array.length, temporaryValue, randomIndex;

      // While there remain elements to shuffle...
      while (0 !== currentIndex) {

        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;

        // And swap it with the current element.
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
      }

      return array;
    }
    
    function test() {
      let answer;
      //for (let obj of document.images) { // ET PAS in !
      //  console.log("Info :", obj, obj.id);
      //  answer = obj.id;
      //}
      let o = document.getElementById("answer");
      let test_name = tests_list[tests_nb];
      if (o.value === test_name) {
        alert("Bien joué !");
        tests_nb++;
        if (tests_nb == tests_list.length) {
          alert("Tous les tests sont terminés. On recommence !");
          tests_list = shuffle(tests_list);
          tests_nb = 0;
        }
        let i =  document.getElementById("answer");
        i.value = "";
        on_load();
      } else {
        alert("Il y a une erreur !");
      }
    }
    
    var tests = {
        "book"   : "./images/white-book.png",
        "read"   : "./images/read.png",
        "pencil" : "./images/pencil.png",
        "talk"   : "./images/discussion.png",
        "eat"    : "./images/eating.png",
        "drink"  : "./images/drinking.png",
        "pull"   : "./images/pull.png",
        "push"   : "./images/push.png",
        "run"    : "./images/run.png",
    };
    
    var tests_list = [
        "book", "read", "pencil", "talk", "eat", "drink", "pull", "push", "run",
    ];
    tests_list = shuffle(tests_list);
    
    var tests_nb = 0;
    
    function on_load() {
        let o = document.getElementById("pic");
        let test_name = tests_list[tests_nb];
        o.src = tests[test_name];
    }
  </script>
</head>
<body onload="on_load();">
  <form>
    <table>
      <tr>
        <td>
          <img id="pic" src="">
        </td>
        <td align="center"><input id="answer" size="50" placeholder="Entrer un mot ici anglais sans article et sans majuscule"/>
          <br>
          <br>
          <button onclick="test(); return false;"/>Vérifier</button>
        </td>
      </tr>
    </table>
  </form>
</body>
</html>
